<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Class Definitions</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="../../R.css">
</head><body>

<table width="100%" summary="page for Classes {methods}"><tr><td>Classes {methods}</td><td align="right">R Documentation</td></tr></table>
<h2>Class Definitions</h2>


<h3>Description</h3>

<p>
Class definitions are objects that contain the formal definition of a
class of R objects, usually referred to as an S4 class, to
distinguish them from the informal S3 classes.
This document gives an overview of S4 classes; for
details of the class representation objects, see help for the class
<code><a href="classRepresentation-class.html">classRepresentation</a></code>.
</p>


<h3>Details</h3>

<p>
When a class is defined, an object is stored that contains the
information about that class, including:
</p>

<dl>
<dt>Slots:</dt><dd></p>
<p>
The data contained in an object from an S4 class is defined by
the <EM>slots</EM> in the class definition.
</p>
<p>
Each slot in an object is a component of the object;
like components (that is, elements) of a
list, these may be extracted and set, using the
function <code><a href="slot.html">slot</a>()</code> or more often the operator
<code>"<a href="../../base/html/slotOp.html">@</a>"</code>.  However, they
differ from list components in important ways.
First, slots can only be referred to by name, not by position,
and there is no partial matching of names as with list elements.
</p>
<p>
All the objects from a particular class have the same set of slot
names; specifically, the slot names that are contained in the
class definition.  Each slot in each object always has the same
class; again, this is defined by the overall class definition.
The phrase &ldquo;has the same class&rdquo; means that the class of the object in
the slot must be the same as the class specified in the
definition, or some class that extends the one in the
definition.
</p>
<p>
One class name is special, <code>.Data</code>.  This stands for the
&lsquo;data part&rsquo; of the object.  Any class that contains one
of the basic data types in <font face="Courier New,Courier" color="#666666"><b>R</b></font>{}, has implicitly a corresponding
<code>.Data</code> slot of that type, allowing computations to extract
or replace the data part while leaving other slots
unchanged. The <code>.Data</code> slot also determines the type of the
object; if <code>x</code> has a <code>.Data</code> slot, the type of the
slot is the type of the object (that is, the value of
<code><a href="../../base/html/typeof.html">typeof</a>(x)</code>.  Otherwise the type of the object is
<code>"S4"</code>.  Extending a basic type this way allows objects to
use old-style code for the corresponding type as well as S4
methods.  Any basic type can be used for <code>.Data</code>, with the
exception of a few that do not behave like ordinary objects;
namely, <code>"NULL"</code>, environments, and external pointers.
</p>
<p>
Classes exist for which there are no actual objects, the
<EM>virtual</EM> classes, in fact a
very important programming tool.  They are used to group together
ordinary classes that want to share some programming behavior,
without necessarily restricting how the behavior is implemented.
Virtual class definitions may if you want include
slots (to provide some common behavior without fully defining
the object&mdash;see the class <code><a href="TraceClasses.html">traceable</a></code> for an example).
</p>
<p>
A simple and useful form of virtual class is the <EM>class
union</EM>, a virtual class that is defined in a call to
<code><a href="setClassUnion.html">setClassUnion</a></code> by listing one or
more of subclasses (classes that extend the class union).  Class
unions can include as subclasses basic data types (whose
definition is otherwise sealed).
</p>
<p>
</dd>
<dt>Superclasses:</dt><dd></p>
<p>
The definition of a class includes the <EM>superclasses</EM> &mdash;the classes that this class extends.  A
class <code>Fancy</code>, say, extends a class <code>Simple</code> if an
object from the <code>Fancy</code> class has all the capabilities of
the <code>Simple</code> class (and probably some more as well).  In
particular, and very usefully, any method defined to work for a
<code>Simple</code> object can be applied to a <code>Fancy</code> object as
well.
</p>
<p>
This relationship is
expressed equivalently by saying that <code>Simple</code> is a superclass of
<code>Fancy</code>, or that <code>Fancy</code> is a subclass of
<code>Simple</code>.
</p>
<p>
The direct superclasses of a class are those superclasses
explicitly defined.   Direct superclasses can be defined in
three ways.  Most commonly, the superclasses are listed in the
<code>contains=</code> argument in the call to <code><a href="setClass.html">setClass</a></code>
that creates the subclass.   In this case the subclass will
contain all the slots of the superclass, and the relation
between the class is called <EM>simple</EM>, as it in fact is.
Superclasses can also be defined
explicitly by a call to <code><a href="is.html">setIs</a></code>; in this case, the
relation requires methods to be specified to go from subclass to
superclass.   Thirdly, a class union is a superclass of all the
members of the union.  In this case too the relation is simple,
but notice that the relation is defined when the superclass is
created, not when the subclass is created as with the
<code>contains=</code> mechanism.
</p>
<p>
The definition of a superclass will also potentially contain
its own direct superclasses.  These are considered (and shown) as
superclasses at distance 2 from the original class; their direct
superclasses are at distance 3, and so on.  All these are
legitimate superclasses for purposes such as method selection.
</p>
<p>
When superclasses are defined  by including the names of
superclasses in the <code>contains=</code> argument to
<code><a href="setClass.html">setClass</a></code>,   an object from the class will have all the slots
defined for its own class <EM>and</EM> all the slots defined for all
its superclasses as well.
</p>
<p>
The information about the relation between a class and a
particular superclass is encoded as an object of class
<code><a href="SClassExtension-class.html">SClassExtension</a></code>).  A list of such objects for
the superclasses (and sometimes for the subclasses) is included in
the metadata object defining the class.  If you need to compute
with these objects (for example, to compare the distances), call
the function <code><a href="is.html">extends</a></code> with argument <code>fullInfo=TRUE</code>.
</p>
<p>
</dd>
<dt>Objects:</dt><dd></p>
<p>
The objects from a class, typically created by a call to
<code><a href="new.html">new</a></code> or by assigning another object from the class,
are defined by the <EM>prototype</EM> object for the class and by
additional arguments in the call to <code><a href="new.html">new</a></code>, which are
passed to a method for that class for the function
<code><a href="new.html">initialize</a></code>.
</p>
<p>
Each class definition contains a prototype object
for the class.  This must have values for all the slots defined by
the class definition.
By default, these are the prototypes of all
the slot classes, if those are not virtual classes.  However, the
definition of the class can specify any valid object for any of
the slots.
</p>
<p>
There are a number of &lsquo;basic&rsquo; classes, corresponding to the
ordinary kinds of data occurring in R.  For example,
<code>"numeric"</code> is a class corresponding to numeric vectors.
There are also basic classes corresponding to objects in the
language, such as <code>"function"</code> and <code>"call"</code>, and for
specialized objects, such as <code>"environment"</code>
These classes are predefined and can then be used as slots or as
superclasses for any other class definitions.  The prototypes for
the vector classes are vectors of length 0 of the corresponding
type.  Notice that basic classes are unusual in that the
prototype object is from the class itself.
</p>
<p>
There are also a few basic virtual classes, the most important
being <code>"vector"</code>, grouping together all the vector classes;
and <code>"language"</code>, grouping together all the types of objects
making up the R language.
</dd>
</dl>

<h3>References</h3>

<p>
The functions in this package emulate the facility for classes and
methods described in <EM>Programming with Data</EM> (John M. Chambers,
Springer, 1998).  See this book for further details and examples.
</p>


<h3>See Also</h3>

<p>
<code><a href="Methods.html">Methods</a></code>,
<code><a href="setClass.html">setClass</a></code>,
<code><a href="is.html">is</a></code>,
<code><a href="as.html">as</a></code>,
<code><a href="new.html">new</a></code>,
<code><a href="slot.html">slot</a></code>
</p>



<hr><div align="center">[Package <em>methods</em> version 2.7.2 <a href="00Index.html">Index]</a></div>

</body></html>
